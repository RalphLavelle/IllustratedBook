@page "/books/{bookId:int}/{bookSlug}"
@model IllustratedBook.Pages.Books.DetailsModel
@inject IllustratedBook.Services.BookService BookService

@if (Model.Book != null)
{
    <h1>@Model.Book.Title</h1>
    <p>Author: @Model.Book.AuthorName</p>
    <p>Created: @Model.Book.CreatedAt.ToShortDateString()</p>
    
    <h2>Chapters</h2>
    @if (Model.Sections != null && Model.Sections.Any())
    {
        <ul>
            @foreach (var chapter in Model.Sections)
            {
                <li>
                    <a asp-page="./Chapter" 
                       asp-route-bookId="@Model.BookId" 
                       asp-route-bookSlug="@Model.BookSlug"
                       asp-route-chapterId="@chapter.Index" 
                       asp-route-chapterSlug="@BookService.GenerateSlug(chapter.Title ?? "")"
                       asp-route-pageId="1">
                        @chapter.Title
                    </a>
                </li>
            }
        </ul>
    }
    else
    {
        <p>No chapters available for this book.</p>
    }
}
else
{
    <h1>Book not found</h1>
} 