@page "/"
@model IndexModel

<div class="index-container">
    <section class="hero">
        <h1>The Illustrated Book</h1>
        <div class="hero-image">
            <div class="image-container">
                <img class="image-content" src="~/images/boy.jpg" alt="Boy illustration" />
            </div>
        </div>
    </section>

    <section class="books-section">
        <h2>Available Books</h2>
        <div class="books-grid">
            <component type="typeof(IllustratedBook.Blazor.BookList)" render-mode="Server" />
        </div>
    </section>
</div>

@functions {
    public class IndexModel : PageModel
    {
        private DataContext context;
        public IEnumerable<Book> Books { get; set; } = Enumerable.Empty<Book>();
        public IndexModel(DataContext ctx)
        {
            context = ctx;
        }

        [FromQuery]
        public string? SelectedBook { get; set; } = string.Empty;
        public void OnGet()
        {
            Books = context.Books.OrderBy(b => b.Title).ToList();
        }
    }
}